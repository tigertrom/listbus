<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voluntariado em Viagens - Cadastro</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <!-- Configura√ß√µes e Utilit√°rios -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    
    <style>
        /* [MANTENHA TODO O CSS ORIGINAL AQUI - omitido para brevidade] */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
            --white: #ffffff;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        /* ... (copie todo o CSS do seu arquivo original) ... */
        
        .admin-link {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }
        
        .admin-link a {
            background: rgba(255,255,255,0.2);
            color: var(--white);
            padding: 10px 20px;
            border-radius: 30px;
            text-decoration: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            font-size: 0.9rem;
            transition: all 0.3s;
            font-weight: 600;
            display: inline-block;
        }
        
        .admin-link a:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Link para √°rea administrativa -->
    <div class="admin-link">
        <a href="admin.html">üîê √Årea Administrativa</a>
    </div>

    <div class="container">
        <header>
            <div class="headsind" id="registrationHeadsind">
                <img src="image/cabe√ßalho sindguardas.png" alt="Sindguardas-SP" class="header-image">
                <h1>üöå Voluntariado em Viagens</h1>
                <p>Cadastre-se para participar das nossas viagens solid√°rias</p>
            </div>
        </header>

        <!-- [MANTENHA TODO O CONTE√öDO DO FORMUL√ÅRIO AQUI] -->
        <div class="card" id="registrationCard">
            <!-- ... conte√∫do do formul√°rio ... -->
        </div>
    </div>

    <!-- Modal de Sele√ß√£o de Assentos -->
    <div class="modal-overlay" id="seatModal">
        <!-- ... conte√∫do do modal ... -->
    </div>

    <script>
        // ==========================================
        // L√ìGICA DA P√ÅGINA DE CADASTRO - index.html
        // ==========================================
        
        let volunteers = [];
        let selectedSeat = null;
        let tempFormData = null;
        let isMinor = false;
        let selectedResponsavel = null;

        // Carregar volunt√°rios
        db.collection('volunteers').onSnapshot((snapshot) => {
            volunteers = [];
            snapshot.forEach((doc) => {
                volunteers.push({ id: doc.id, ...doc.data() });
            });
        });

        // Event listeners para m√°scaras
        document.getElementById('cpf').addEventListener('input', (e) => {
            e.target.value = maskCPF(e.target.value);
        });
        document.getElementById('rg').addEventListener('input', (e) => {
            e.target.value = maskRG(e.target.value);
        });
        document.getElementById('phone').addEventListener('input', (e) => {
            e.target.value = maskPhone(e.target.value);
        });

        // [COPIE AQUI TODAS AS FUN√á√ïES RELACIONADAS AO CADASTRO]:
        // - checkAge()
        // - updateResponsaveisList()
        // - updateResponsavelInfo()
        // - openSeatModal()
        // - closeSeatModal()
        // - renderSeats()
        // - createSeatElement()
        // - selectSeat()
        // - sendConfirmationEmail()
        // - confirmSeatSelection()
        // - showError()
        
        // Fun√ß√µes de cadastro (exemplo simplificado - copie as originais):
        function checkAge() {
            const birthDate = document.getElementById('birthDate').value;
            if (!birthDate) return;
            isMinor = calculateAge(birthDate) < 18;
            // ... resto da l√≥gica
        }

        async function sendConfirmationEmail(formData, seatNumber) {
            try {
                const templateParams = {
                    to_email: formData.email,
                    nome: `${formData.firstName} ${formData.lastName}`,
                    assento: seatNumber
                };

                await emailjs.send(
                    EMAILJS_CONFIG.SERVICE_ID,
                    EMAILJS_CONFIG.TEMPLATE_ID,
                    templateParams
                );
                return true;
            } catch (error) {
                console.error('Erro ao enviar email:', error);
                return false;
            }
        }

        // [CONTINUE COM AS DEMAIS FUN√á√ïES...]
    </script>
</body>
</html>
